<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <meta name="author" content="PKT">
  
  <link rel="canonical" href="https://docs.pkt.cash/mining/">
  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <title>Mining - PKT Documentation</title>
  

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
  <link href='https://rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
  <link
    href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin'
    rel='stylesheet' type='text/css'>
  <link href="../css/bootstrap-custom.css" rel="stylesheet">
  <link href="../css/base.css" rel="stylesheet">
  <link href="../css/pkt.css" rel="stylesheet">

  
  
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
  
  

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

   
</head>

<body>

  <header class="header">
    <div class="c-navigation__top">
      <div class="container-header flex_display">
        <div class="c-navigation__top_links flex_display">
          <a href="https://docsend.com/view/ayf5d3tz5rymn8fv" target="_blank" class="c-navigation__top_links__link c-navigation__top_links__link__deck">Deck</a>
          <a href="/PKT_Network_v1.0_2021.02.01.pdf" target="_blank" id="en" class="c-navigation__top_links__link_whitepaper">Whitepaper</a> 
          <a href="https://docs.pkt.cash" target="_blank" class="c-navigation__top_links__link">Docs</a> 
          <div class="c-navigation__top_links_social">
            <a href="https://discord.gg/pktcash" target="_blank" title="Discord" class="c-navigation__top_links_social__item">
              <img src="../img/header-social-discord.svg" alt="Discord" class="c-navigation__top_links_social__item_icon">
            </a>
          </div>
          <div class="c-navigation__top_links_social">
            <a href="https://twitter.com/pktcash" target="_blank" title="Twitter" class="c-navigation__top_links_social__item">
              <img src="../img/header-social-twitter.svg" alt="Twitter" class="c-navigation__top_links_social__item_icon">
            </a>
          </div>
          <div class="c-navigation__top_links_social">
            <a href="https://pkt.chat/" target="_blank" title="PKT Chat" class="c-navigation__top_links_social__item">
              <img src="../img/header-social-pktchat.svg" alt="PKT Chat" class="c-navigation__top_links_social__item_icon">
            </a>
          </div>
          <div class="c-navigation__top_links_social">
            <a href="https://www.instagram.com/pktcash/" target="_blank" title="Instagram" class="c-navigation__top_links_social__item">
              <img src="../img/header-social-instagram.svg" alt="Instagram" class="c-navigation__top_links_social__item_icon">
            </a>
          </div>
          <div class="c-navigation__top_links_social">
            <a href="https://www.youtube.com/c/PKTCash/" target="_blank" title="Youtube" class="c-navigation__top_links_social__item">
              <img src="../img/header-social-youtube.svg" alt="Youtube" class="c-navigation__top_links_social__item_icon">
            </a>
          </div> 
          <a href="https://explorer.pkt.cash" target="_blank" class="c-navigation__top_links__link_border">Explorer</a>
        </div>
      </div>
    </div>
    <div class="container-header flex_display">
        <a href="https://pkt.cash/" class="header__logo">
            <img src="../img/logo-new.svg" alt="PKT Blog">
        </a>
        <nav class="header__nav">
            <ul class="flex_display">
                <li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/utility">Utility</a></li>
                <li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/build">Build</a></li>
                <li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/mine">Mine</a></li>
                <li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/tech">Technology</a></li>
                <li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/resources">Community</a></li>
                <li class="menu-item sub-menu-parent">
                    <a class="header__nav-link dropdown">Resources <svg width="12" height="12" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 284.929 284.929" xml:space="preserve" fill="#fff" style="enable-background:new 0 0 284.929 284.929"><g><path d="M282.082,76.511l-14.274-14.273c-1.902-1.906-4.093-2.856-6.57-2.856c-2.471,0-4.661,0.95-6.563,2.856L142.466,174.441
                    L30.262,62.241c-1.903-1.906-4.093-2.856-6.567-2.856c-2.475,0-4.665,0.95-6.567,2.856L2.856,76.515C0.95,78.417,0,80.607,0,83.082
                    c0,2.473,0.953,4.663,2.856,6.565l133.043,133.046c1.902,1.903,4.093,2.854,6.567,2.854s4.661-0.951,6.562-2.854L282.082,89.647
                    c1.902-1.903,2.847-4.093,2.847-6.565C284.929,80.607,283.984,78.417,282.082,76.511z"></path></g></svg></a>
                 <ul class="sub-menu">
                	<li class="menu-item" tab-index="0"><a class="header__nav-link" href="https://pkt.cash/origin-story">PKT Origin Story</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/letter">Letter from CJD</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/cryptoeconomics">Cryptoeconomics</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/network-steward">Network Steward</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/ecosystem">Ecosystem</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/pkt">PKT Cash</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/wallet">Wallet</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/getpkt">Get PKT</a></li>
                	<li class="menu-item"><a class="header__nav-link" href="https://pkt.cash/wpkt">WPKT</a></li>
                 </ul></li>
                <li class="menu-item"><a class="header__nav-link" href="https://crypto.pkt.cash/">Blog</a></li>
            </ul>
            <div class="header__nav_mobile">
                <div class="header__nav_mobile_social flex_display">
                  <div class="c-navigation__top_links_social">
                    <a href="https://discord.gg/pktcash" target="_blank" title="Discord" class="c-navigation__top_links_social__item">
                      <img src="../img/header-social-discord.svg" alt="Discord" class="c-navigation__top_links_social__item_icon">
                    </a>
                  </div>
                  <div class="c-navigation__top_links_social">
                    <a href="https://twitter.com/pktcash" target="_blank" title="Twitter" class="c-navigation__top_links_social__item">
                      <img src="../img/header-social-twitter.svg" alt="Twitter" class="c-navigation__top_links_social__item_icon">
                    </a>
                  </div>
                  <div class="c-navigation__top_links_social">
                    <a href="https://pkt.chat/" target="_blank" title="PKT Chat" class="c-navigation__top_links_social__item">
                      <img src="../img/header-social-pktchat.svg" alt="PKT Chat" class="c-navigation__top_links_social__item_icon">
                    </a>
                  </div>
                  <div class="c-navigation__top_links_social">
                    <a href="https://www.instagram.com/pktcash/" target="_blank" title="Instagram" class="c-navigation__top_links_social__item">
                      <img src="../img/header-social-instagram.svg" alt="Instagram" class="c-navigation__top_links_social__item_icon">
                    </a>
                  </div>
                  <div class="c-navigation__top_links_social">
                    <a href="https://www.youtube.com/c/PKTCash/" target="_blank" title="Youtube" class="c-navigation__top_links_social__item">
                      <img src="../img/header-social-youtube.svg" alt="Youtube" class="c-navigation__top_links_social__item_icon">
                    </a>
                  </div>
                </div>
                <a href="https://explorer.pkt.cash" target="_blank" class="c-navigation__top_links__link_border">Explorer</a>
            </div>
        </nav>
        <div id="toggle_nav" class="header__nav__burger"></div>
    </div>
  </header>

  
<section class="posts">
  <div class="container">
    <div class="post__category-wrap">
      <ul class="posts__category">
        
        <li
          class="posts__category-item "
        >
          <a href="..">Home</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../electrum/">PKT Electrum</a>
        </li>
        
        <li
          class="posts__category-item  active"
        >
          <a href="./">Mining</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="pool_setup_guide/">Pool Operation</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../pktd/">Pktd</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../pktd/pktwallet/">PKTWallet</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../pktd/migrating_from_electrum/">Electrum Import</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../PKT_FAQ/">FAQ</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../code_of_conduct/">Code of Conduct</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../commercial/">Commercial</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../useful_tools/">Useful Tools</a>
        </li>
        
        <li
          class="posts__category-item "
        >
          <a href="../communication/">Communication</a>
        </li>
        
      </ul>
    </div>
  </div>
</section>

  <div class="container">
    
    
    <div class="col-md-3 sidebar-wrapper"><div class="bs-sidebar hidden-print affix well" role="complementary">
  <ul class="nav bs-sidenav">
    <li class="first-level active">
      <a href="#mining">Mining</a>
    </li>
    <li class="second-level">
      <a href="#how-to-announcement-mine">How to Announcement mine</a>
    </li>
    
    <li class="third-level">
      <a href="#installing-from-source">Installing from source</a>
    </li>
    <li class="third-level">
      <a href="#deploying-a-docker-image">Deploying a Docker Image</a>
    </li>
    <li class="second-level">
      <a href="#choosing-pools-to-mine-in">Choosing Pools to mine in</a>
    </li>
    
    <li class="second-level">
      <a href="#limiting-system-resources">Limiting System Resources</a>
    </li>
    
    <li class="third-level">
      <a href="#limit-cpu-usage">Limit CPU Usage</a>
    </li>
    <li class="third-level">
      <a href="#limit-bandwidth-usage">Limit Bandwidth Usage</a>
    </li>
    <li class="second-level">
      <a href="#block-mining-running-a-pool">Block Mining &amp; Running a Pool</a>
    </li>
    
    <li class="second-level">
      <a href="#packetcrypt-data-flow">PacketCrypt Data Flow</a>
    </li>
    
    <li class="second-level">
      <a href="#more-information-and-packetcrypt-pool-code">More Information and PacketCrypt Pool Code</a>
    </li>
    
    <li class="second-level">
      <a href="#announcement-difficulty">Announcement Difficulty</a>
    </li>
    
    <li class="third-level">
      <a href="#announcement-set-selection">Announcement Set Selection</a>
    </li>
    <li class="third-level">
      <a href="#optimal-difficulty-curve">Optimal Difficulty Curve</a>
    </li>
    <li class="second-level">
      <a href="#faq-for-ann-miners">FAQ for ANN Miners</a>
    </li>
    
    <li class="third-level">
      <a href="#what-does-overflow-mean">What does overflow mean?</a>
    </li>
  </ul>
</div></div>
    <div class="col-md-9" role="main"> <h1 id="mining">Mining<a class="headerlink" href="#mining" title="Permanent link">&para;</a></h1>
<p>PacketCrypt is a <em>bandwidth hard proof of work</em>, this means it requires lots of bandwidth to mine.
Miners collaborate with one another by sending small messages (called <em>Announcements</em>) and the
sending of these messages requires a large amount of <em>bandwidth</em>.</p>
<p>Miners who are working in collaboration with one another are members of a mining pool, therefore
all mining of PacketCrypt is done in pools.</p>
<p>PacketCrypt mining is split into two distinct stages:</p>
<ul>
<li>Announcement Mining - Using your CPU to create Announcements</li>
<li>Block Mining - Collecting Announcements from Announcement Miners and using them to mine blocks</li>
</ul>
<p>Block mining is typically done at the mining pool's datacenter, however Announcement mining can be
done from anywhere.</p>
<h2 id="how-to-announcement-mine">How to Announcement mine<a class="headerlink" href="#how-to-announcement-mine" title="Permanent link">&para;</a></h2>
<h3 id="installing-from-source">Installing from source<a class="headerlink" href="#installing-from-source" title="Permanent link">&para;</a></h3>
<p>Pre-built packetcrypt binaries (for linux) or installation packages (for macos) and archives (for windows) can be downloaded from <a href="https://github.com/cjdelisle/packetcrypt_rs/releases/">packetcrypt releases page</a>.</p>
<ul>
<li>For <strong>windows</strong>, download the zip archive suffixed with <code>-windows.zip</code><br />
  and extract its content.</li>
<li>For <strong>macos</strong>, download the package suffixed with <code>.pkg</code><br />
  and click on its icon in the Finder for installation.</li>
<li>For <strong>linux</strong>, download the binary suffixed with <code>-linux_amd64</code>
  and rename it <code>packetcrypt</code>.</li>
<li>
<ul>
<li>If you're on Arch linux or Manjaro, you can install the <a href="https://aur.archlinux.org/packages/packetcrypt">packetcrypt AUR package</a></li>
</ul>
</li>
</ul>
<h3 id="deploying-a-docker-image">Deploying a Docker Image<a class="headerlink" href="#deploying-a-docker-image" title="Permanent link">&para;</a></h3>
<p>There is a PacketCrypt Docker image available, which can be used for announcement mining.</p>
<p>To install:</p>
<ol>
<li>
<p>Download and install <a href="https://www.docker.com/">Docker</a> for your operating system.</p>
</li>
<li>
<p>Download the PacketCrypt Docker image:</p>
</li>
</ol>
<pre><code class="language-console">$ docker pull thomasjp0x42/packetcrypt
</code></pre>
<p>There's also available a PacketCrypt Docker image built without the portable flag (<code>--no-portable</code>) which may increase the performance of the announcement mining while reducing CPU compatibility. Image is available at <code>thomasjp0x42/packetcrypt-amd64</code>.</p>
<ol>
<li>Run the container similar to the commands described in the <a href="#begin-announcement-mining">Begin Announcement Mining</a> section, except replace this part of the command:</li>
</ol>
<pre><code class="language-console">$ packetcrypt
</code></pre>
<p>with this command to run PacketCrypt from Docker:</p>
<pre><code class="language-command">$ docker run thomasjp0x42/packetcrypt
</code></pre>
<p>The final command will be formatted like this:</p>
<pre><code class="language-console">$ docker run thomasjp0x42/packetcrypt ann -p &lt;your_wallet_address&gt; &lt;pool_1&gt;
</code></pre>
<p>More information can be found at the <a href="https://hub.docker.com/r/thomasjp0x42/packetcrypt">PacketCrypt DockerHub page</a></p>
<h4 id="begin-announcement-mining">Begin Announcement Mining<a class="headerlink" href="#begin-announcement-mining" title="Permanent link">&para;</a></h4>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p><strong>You cannot mine into the electrum wallet</strong>, You can only mine into the <a href="https://docs.pkt.cash/en/latest/pktd/pktwallet/">Command Line Wallet</a>, the <a href="https://www.pkt.world/wallet">Pkt.World Wallet</a> or the <a href="https://github.com/artrepreneur/PKT-Cash-Wallet/releases">Mac GUI Wallet</a> .</p>
</div>
<p>To begin mining, you will need the address of your wallet and you will need to choose a pool.</p>
<p>There are two ways to configure the announcement miner; by using CLI parameters or by using a configuration file:</p>
<p><strong>Using the CLI</strong></p>
<pre><code>packetcrypt ann -p &lt;your_wallet_address&gt; pool_1 [pool_2 pool_3 pool_4]

[or for windows]

packetcrypt.exe ann -p &lt;your_wallet_address&gt; pool_1 [pool_2 pool_3 pool_4]
</code></pre>
<p><strong>Using a Configuration File</strong></p>
<p>A configuration file must be in JSON format. The file can be loaded from the local filesystem or from a web-accessible location.</p>
<p>Any CLI parameters used will overide the corresponding settings in the configuration file.</p>
<p>Example config.json:</p>
<pre><code>{
  &quot;payment_addr&quot;: &quot;&lt;your_wallet_address&gt;&quot;,
  &quot;pools&quot;: [
    &quot;pool_1&quot;,
    &quot;pool_2&quot;,
    &quot;pool_3&quot;,
    &quot;pool_4&quot;
  ]
}
</code></pre>
<pre><code>packetcrypt ann -c "./config.json"

[or]

packetcrypt ann -c "https://example.com/config.json"

[or for windows]

packetcrypt.exe ann -c "./config.json"

[or]

packetcrypt.exe ann -c "https://example.com/config.json"
</code></pre>
<p>Announcement mining can be done into a single pool or multiple pools. When you announcement mine into multiple pools, you will be paid by each pool that you submit announcements to.</p>
<p>pool_1 is the pool running the highest difficulty. If you notice problems, you can test listing the pools in a different order. The number of pools you mine into is at your discretion. If a pool is down or malfunctioning you will notice the pool is not mining at [100%] in your mining feed and you can choose to remove the under-performing or malfunctioning pool.</p>
<h2 id="choosing-pools-to-mine-in">Choosing Pools to mine in<a class="headerlink" href="#choosing-pools-to-mine-in" title="Permanent link">&para;</a></h2>
<p>You can mine in as many pools as you have the bandwidth to supply. The same data will be uploaded so your CPU is only used once. Currently the pools which are regularly winning blocks include:</p>
<ul>
<li>Pkteer: <code>http://pool.pkteer.com</code></li>
<li>PKTPool: <code>http://pool.pktpool.io</code></li>
<li>PktWorld: <code>http://pool.pkt.world</code></li>
</ul>
<p>If you have bandwidth to spare, you may wish to consider mining with some or all of the new/experimental mining pools listed below. New pools require support from the mining community (in the form of announcements) in order to test their infrastructure and begin to win blocks.</p>
<ul>
<li>K1m3r4: <code>http://pool.k1m3r4.com/</code></li>
<li>Oeuf2: <code>http://oeuf2pool.xyz</code></li>
<li>Pktco.in: <code>http://pktco.in</code></li>
<li>Pkt Digger: <code>http://p.master.pktdigger.com/</code></li>
<li>Pkthash: <code>https://pool.pkthash.com</code></li>
</ul>
<p>(Check the relevant channels on Discord for current pool statuses)</p>
<p>You should test your daily earnings on each pool to see which one is best. Your mining revenue depends on how much each pool allocates towards announcement miners as well as how much hardware they are using in-house. The pools are winning different blocks and if you mine to just one pool, your not getting any payment from the others when they win a block. It's the same with mining to a pool that is not winning any blocks.</p>
<h2 id="limiting-system-resources">Limiting System Resources<a class="headerlink" href="#limiting-system-resources" title="Permanent link">&para;</a></h2>
<p>Limiting the system resources available to Packetcrypt may negatively effect your mining power but can be useful to conserve resources for other processess.</p>
<h4 id="limit-cpu-usage">Limit CPU Usage<a class="headerlink" href="#limit-cpu-usage" title="Permanent link">&para;</a></h4>
<p>Announcement mining is a resource intensive process. By default, Packetcrypt will use 100% of the available CPU resources. CPU usage can be limited by assigning a limited number of threads to packetcrypt using the <code>-t</code> CLI parameter or <code>"threads"</code> key if using a configuration file.</p>
<p>Example of assigning four (4) threads to Packetcrypt:</p>
<pre><code>packetcrypt ann -p &lt;your_wallet_address&gt; pool_1 [pool_2 pool_3 pool_4] -t 4
</code></pre>
<p>or</p>
<pre><code>{
  &quot;threads&quot; 4
}
</code></pre>
<h4 id="limit-bandwidth-usage">Limit Bandwidth Usage<a class="headerlink" href="#limit-bandwidth-usage" title="Permanent link">&para;</a></h4>
<p>Bandwidth usage is directly related to two main factors:</p>
<p>1 - Mining difficulty of the primary pool (the first pool listed in Packetcrypt pool configuration)</p>
<ul>
<li>A lower difficulty means higher bandwidth usage</li>
</ul>
<p>2 - The number of pools mined</p>
<ul>
<li>Packetcrypt will send the same Announcements to each pool mined</li>
</ul>
<p>Bandwidth usage can therefore be limited by selecting a higher difficulty pool as the primary pool and/or by mining to fewer pools.</p>
<h2 id="block-mining-running-a-pool">Block Mining &amp; Running a Pool<a class="headerlink" href="#block-mining-running-a-pool" title="Permanent link">&para;</a></h2>
<p>Because each block miner must use as much bandwidth as all of the announcement miners <em>combined</em>,
block mining is typically done at the location of the pool. Even a pool operator who wanted to
support external block mining would find that the pool itself would need enough <em>upload</em> bandwidth
to match all of the block miners - which would be completely untenable. If you are interested
in block mining, contact the pool operator and discuss sending hardware to their location.</p>
<p>Starting your own pool requires setting up a number of services:</p>
<ul>
<li><em>pktd node</em> (one or more) - One pktd instance is required for the Master to function, each of the
  <em>Block Handlers</em> may optionally use separate pktd nodes.</li>
<li><em>Master</em> (one) - This node coordinates all of the others and provides work files and configuration</li>
<li><em>Ann Handler</em> (one or more) - These are high performance nodes which accept announcements from the
  announcement miners in the network, they also provide announcements to the block miners. As you
  scale up the amount of bandwidth in the pool, you will need to add more Ann handlers.</li>
<li><em>Block Miner</em> (one or more) - These nodes download announcements from the announcement handlers and
  use them in the mining process to mine blocks.</li>
<li><em>Block Handlers</em> (one or more) - These nodes receive "block shares" from the block miners and
  submit blocks if</li>
<li><em>Paymaker</em> (1) - This node receives updates from the Ann Handlers and Block Handlers and keeps
  track of who should be paid. The Paymaker sends configuration to the pktd node which is used by the
  Master in order to make the pool pay out the announcement and block miners</li>
</ul>
<h2 id="packetcrypt-data-flow">PacketCrypt Data Flow<a class="headerlink" href="#packetcrypt-data-flow" title="Permanent link">&para;</a></h2>
<p><img alt="packetcrypt_data_flow" src="packetcrypt_data_flow.png" /></p>
<ul>
<li><span style="color:#ff9900">█</span> Orange: Announcements are sent from the Announcement miners
  to the Ann Handlers and then to the Block miners</li>
<li><span style="color:#0000ff">█</span> Blue: Block shares are sent from block miners to Block
  Handler(s)</li>
<li><span style="color:#9900ff">█</span> Purple: Winning blocks are submitted by the Block Handler(s)
  to pktd and the PKT network</li>
<li><span style="color:#ff00ff">█</span> Pink: Block Handlers and Ann Handlers inform Paymaker of work
  done by announcement and block miners</li>
<li><span style="color:#6aa84f">█</span> Green: Paymaker configures pktd instance to create blocks
  which pay the people who have been mining</li>
<li><span style="color:#783f04">█</span> Brown: Master gets block templates from pktd instance</li>
<li>Black dotted line: All nodes request configuration and block templates from Master node</li>
</ul>
<h2 id="more-information-and-packetcrypt-pool-code">More Information and PacketCrypt Pool Code<a class="headerlink" href="#more-information-and-packetcrypt-pool-code" title="Permanent link">&para;</a></h2>
<p>The code and documentation for running a pool is available on the <strong>C / nodejs</strong> version of the
<a href="https://github.com/cjdelisle/PacketCrypt/blob/master/docs/pool.md">PacketCrypt</a> project,
the new Rust version only contains Announcement Miner and Announcement Handlers.</p>
<h2 id="announcement-difficulty">Announcement Difficulty<a class="headerlink" href="#announcement-difficulty" title="Permanent link">&para;</a></h2>
<p>PacketCrypt is designed in such a way that a mining pool can double its effective power by:</p>
<ul>
<li>Doubling the total block mining computation effort</li>
<li>Doubling the total announcement mining computation effort, or</li>
<li>Doubling the amount of bandwidth between announcement miners and the pool</li>
</ul>
<p>The way that a pool operator limits the amount of bandwidth flowing into the pool, to prevent
overloading of the network, is by setting what is known as the <em>announcement difficulty</em>. The
announcement difficulty for a pool specifies how much work must be done on an announcement in order
for the announcement to be accepted and paid out by the pool. Announcement difficulty serves to
slow down the announcement miners to protect the pool's network.</p>
<p>In general, doubling the announcement difficulty will halve the amount of bandwidth used by the
pool and will also halve the pool's overall mining power, with a limit that setting the announcement
difficulty lower than <code>2</code> does not bring any additional value. To explain why it works like this,
we need to examine the PacketCrypt algorithm rules and the in particular how the block mining software
decides which announcements to use when attempting to mine a block.</p>
<h3 id="announcement-set-selection">Announcement Set Selection<a class="headerlink" href="#announcement-set-selection" title="Permanent link">&para;</a></h3>
<p>PacketCrypt algorithm allows block miners to perform less work if they are able to prove that they
had a certain number of "high value" announcements in memory at the time of mining, the exact ratio
of actual work a block miner must do to the amount of work the PKT blockchain requires is called the
<em>power multipler</em>.</p>
<p>For a block miner seeking to optimize their power multiplier, every announcement has a particular
level of utility value which is based on the amount of work that was done by the announcement miner
(announcement difficulty) <em>and</em> how old the announcement is. We call this the <em>effective difficulty</em>.</p>
<p>The effective difficulty of an announcement starts off as the actual difficulty of the work done to
mine it and then decreases by half every block-period until it is less than 1 and the announcement
is no longer usable for mining.</p>
<p>The block mining software selects a subset of announcements which which will give it the best
power multiplier based on the PacketCrypt algorithm:</p>
<pre><code>power_multiplier = min(effective_difficulty) * ann_count ** 2
</code></pre>
<p>The <code>min(effective_difficulty)</code> is the effective difficulty of the "least valuable" announcement
that is being mined with.</p>
<p>Lets assume that announcement miners are providing a steady supply of 1000 announcements per
block-period and all announcements have an initial announcement difficulty of 128. The block mining
software can choose to mine with 1000 announcements at 128 effective difficulty, or with 2000
announcements at 64 effective difficulty, or with 3000 announcements at 32 effective difficulty and
so on.</p>
<p><img alt="ann_selection.png" src="ann_selection.png" /></p>
<p>The best choice is to use the previous <em>three</em> block periods which provides a power multiplier that
is 225% higher than that of using just the most recent 1 period worth of announcements. This curve
is the same no matter what difficulty we are starting with.</p>
<h3 id="optimal-difficulty-curve">Optimal Difficulty Curve<a class="headerlink" href="#optimal-difficulty-curve" title="Permanent link">&para;</a></h3>
<p>Knowing that the optimal announcement set is all of those announcements mined over the past 3 block
periods, we can compute the overall power of a pool as the announcement difficulty is raised.</p>
<p>At announcement difficulty 1, announcements cannot be used for more than 1 block, but if we imagine
that the announcement mining community can produce 1000 announcements per block at difficulty 1 then
we can reason that the power multiplier will be <code>1000 ** 2</code> or 1 million.</p>
<p>At difficulty 2 we can expect the announcement miners will produce 500 announcements per block period
but since 2 block periods can be used, the power multiplier is the same.</p>
<p>At difficulty 4, the announcement miners will produce 250 announcements per block period and they
will be valid for 3 block periods making the power multiplier <code>750 ** 2</code> or 562,500.</p>
<p><img alt="ann_diff_power.png" src="ann_diff_power.png" /></p>
<p>From here, the power output of the power multiplier of the optimal announcement set halves for each
doubling of the announcement difficulty, making the optimal difficulty <code>2</code>.</p>
<h2 id="faq-for-ann-miners">FAQ for ANN Miners<a class="headerlink" href="#faq-for-ann-miners" title="Permanent link">&para;</a></h2>
<h3 id="what-does-overflow-mean">What does overflow mean?<a class="headerlink" href="#what-does-overflow-mean" title="Permanent link">&para;</a></h3>
<p>When the ann handler receives an announcement, it puts it into a queue, when the queue fills up it responds overflow immediately. The queue can become long, so you may receive "operation timed out" you're still being paid, when you receive "overflow" you are not being paid.</p>
<p>Unfortunately, you may also receive "operation timed out" because the handler is unresponsive, it's not obvious which is the reason from looking at the logs.</p>
<p>For example, what you will see in the AnnMiner Logs:</p>
<pre><code>1618394538 INFO annmine.rs:519 467 Ke/s   28.56Mb/s   overflow: [0, 0, 3072, 0]      uploading: [0, 0, 17632, 0]                 accept/reject: [26932/0, 0/0, 4856/0, 796/0]                    - goodrate: [100%, 100%, 61%, 100%]
</code></pre>
<ul>
<li>467 Ke/s
  467 kilo-encryptions (thousands of encryptions) per second of mining power.</li>
<li>28.56Mb/s
  Total upload bandwidth (to all pools - combined)</li>
<li>overflow: [0, 0, 3072, 0]
  Overflowed the internal queue of the ann miner, before it was even able to upload to the pool, one number for each pool you're mining to.</li>
<li>3072
  Number of anns which are not uploaded to pool #3.</li>
<li>uploading [0, 0, 17632, 0]
  Number of anns currently in-flight in active http requests, again 3rd pool is a problem, others are doing well (in this example).</li>
<li>accept/reject [26932/0, 0/0, 4856/0, 796/0]
  Anns accepted/rejected by each pool, these numbers are based on the previous 10 seconds, pool #2 is giving a zero accepted which might be an issue, keep watching the next message 10 seconds later for another update.</li>
<li>goodrate [100%, 100%, 61%, 100%]
  Goodrate = number of anns accepted divided by number of anns produced.</li>
</ul></div>
    
    
  </div>

  
  <footer class="footer">
    
    
    <div class="container-footer">
      <div class="footer__wrap">
		<a href="https://pkt.cash" class="footer__logo">
          <img src="../img/logo-footer.svg" alt="">
        </a>
        <div class="footer__links">
          <div class="footer__links-one">
            <h4 class="footer__links-title">Quicklinks</h4>
            <a href="https://pkt.cash/cash" class="footer__links-link">PKT</a>
            <a href="https://pkt.cash/mining" class="footer__links-link">Mining</a>
            <a href="https://pkt.cash/network-steward" class="footer__links-link">Network Steward</a>
            <a href="https://pkt.cash/roadmap" class="footer__links-link">Roadmap</a>
            <a href="https://pkt.cash/community" class="footer__links-link">Community</a>
            <a href="https://pkt.cash/about" class="footer__links-link">About</a>
          </div>
          <div class="footer__links-one">
            <h4 class="footer__links-title">Github</h4>
            <a href="https://github.com/pkt-cash/" class="footer__links-link">ptk.cash</a>
            <a href="https://github.com/cjdelisle/cjdns" class="footer__links-link">cjdns</a>
            <a href="https://github.com/cjdelisle/PacketCrypt" class="footer__links-link">PacketCrypt</a>
          </div>
        </div>
        <div class="footer__social footer__links-one">
          <h4 class="footer__social-title">Join the community</h4>
          <a href="https://t.me/pktproject" class="footer__social-link">
            <img src="../img/icon/telegram.svg" alt="" class="footer__social-img">
            Telegram
          </a>
          <a href="https://matrix.to/#/#pkt:matrix.org" class="footer__social-link">
            <img src="../img/icon/matrix.svg" alt="" class="footer__social-img">
            Matrix
          </a>
          <!-- <a href="#" class="footer__social-link">
                  <img src="img/icon/instagram.svg" alt="" class="footer__social-img">
                  Instagram
                </a>
                <a href="#" class="footer__social-link">
                  <img src="img/icon/facebook.svg" alt="" class="footer__social-img footer__social-img--facebook">
                  Facebook
                </a> -->
        </div>
        <div class="footer__copy">
          @ PKT 2021
        </div>
      </div>
    </div>
    
    
  </footer>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="../js/bootstrap-3.0.3.min.js"></script>

  
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <script>var base_url = ".."</script>
  
  <script src="../js/base.js"></script>
  <script src="../search/main.js"></script>

  <div
  class="modal"
  id="mkdocs_search_modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="searchModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button>
        <form>
          <div class="form-group">
            <input
              type="text"
              class="form-control"
              placeholder="Search..."
              id="mkdocs-search-query"
              title="Type search term here"
            />
          </div>
        </form>
        <!-- <h4 class="modal-title" id="searchModalLabel">Search</h4> -->
      </div>
      <div class="modal-body">
        <div id="mkdocs-search-results"></div>
      </div>
    </div>
  </div>
</div><div
  class="modal"
  id="mkdocs_keyboard_modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="keyboardModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
        <button type="button" class="close" data-dismiss="modal">
          <span aria-hidden="true">&times;</span
          ><span class="sr-only">Close</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table">
          <thead>
            <tr>
              <th style="width: 20%">Keys</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="help shortcut"><kbd>?</kbd></td>
              <td>Open this help</td>
            </tr>
            <tr>
              <td class="next shortcut"><kbd>n</kbd></td>
              <td>Next page</td>
            </tr>
            <tr>
              <td class="prev shortcut"><kbd>p</kbd></td>
              <td>Previous page</td>
            </tr>
            <tr>
              <td class="search shortcut"><kbd>s</kbd></td>
              <td>Search</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>
  </body>

</html>
